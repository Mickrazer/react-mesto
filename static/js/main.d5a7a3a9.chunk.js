(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{12:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(6),r=a.n(o),l=(a(2),a(7)),s=a.n(l);var i=function(){return c.a.createElement("header",{className:"header root__section"},c.a.createElement("img",{src:s.a,alt:"mesto logo",className:"logo"}))},u=a(11),m=a(1),p=a(8),d=a.n(p);var f=function(e){var t=e.handleClose,a=e.isOpen,n=(e.name,a&&c.a.createElement("div",{className:"popup"},c.a.createElement("div",{className:"popup__content"},c.a.createElement("img",{src:d.a,alt:"",className:"popup__close",onClick:t}),c.a.createElement("h3",{className:"popup__title"},e.title),c.a.createElement("form",{className:"popup__form",name:e.name},c.a.createElement("input",{type:"text",name:"name",className:"popup__input popup__input_type_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),c.a.createElement("input",{type:"text",name:"link",className:"popup__input popup__input_type_link-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),c.a.createElement("button",{type:!0,className:"button popup__button"},e.button)))));return c.a.createElement("div",null,n)};var h=function(e){var t=e.name,a=e.link,n=e.like;return c.a.createElement("div",{className:"place-card"},c.a.createElement("div",{className:"place-card__image",style:{backgroundImage:"url(".concat(a,")")}},c.a.createElement("button",{className:"place-card__delete-icon"})),c.a.createElement("div",{className:"place-card__description"},c.a.createElement("h3",{className:"place-card__name"},t),c.a.createElement("div",null,c.a.createElement("button",{className:"place-card__like-icon"}),c.a.createElement("p",{className:"place-card__like-icon_counter"},n))))},_=a(9),E=a(10),b=document.querySelector(".user-info__name"),v=document.querySelector(".user-info__job"),k=new(function(){function e(t,a){Object(_.a)(this,e),this.url=t,this.token=a}return Object(E.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:{authorization:"".concat(this.token)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"dataLoading",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:{authorization:"".concat(this.token)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"profileEditSave",value:function(){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:{authorization:"".concat(this.token),"Content-Type":"application/json"},body:JSON.stringify({name:b.textContent,about:v.textContent})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"laiked",value:function(){return fetch("".concat(this.url,"/cards"),{headers:{authorization:"".concat(this.token)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){console.log(e)}))}}]),e}())("https://nomoreparties.co/cohort3","549369e6-22a5-4f49-bf55-d055fc07237e");var N=function(e){var t=e.onEditProfile,a=e.onAddPlace,o=e.onEditAvatar,r=Object(n.useState)(""),l=Object(m.a)(r,2),s=l[0],i=l[1],u=Object(n.useState)(""),p=Object(m.a)(u,2),d=p[0],f=p[1],h=Object(n.useState)(""),_=Object(m.a)(h,2),E=_[0],b=_[1];return Object(n.useEffect)((function(){k.dataLoading().then((function(e){f(e.name),i(e.avatar),b(e.about)}))}),[]),c.a.createElement("div",{className:"user-info"},c.a.createElement("button",{className:"user-info_avatar-btn",onClick:o},c.a.createElement("div",{className:"user-info__photo",style:{backgroundImage:"url(".concat(s,")")}})),c.a.createElement("div",{className:"user-info__data"},c.a.createElement("h1",{className:"user-info__name"},d),c.a.createElement("p",{className:"user-info__job"},E),c.a.createElement("button",{className:"button edit__button",onClick:t},"Edit")),c.a.createElement("button",{className:"button user-info__button",onClick:a},"+"))};var j=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)(!1),s=Object(m.a)(l,2),i=s[0],p=s[1],d=Object(n.useState)(!1),_=Object(m.a)(d,2),E=_[0],b=_[1],v=Object(n.useState)(!1),j=Object(m.a)(v,2),g=j[0],O=j[1];function y(){O(!1),p(!1),b(!1)}return Object(n.useEffect)((function(){k.getInitialCards().then((function(e){for(var t=0;t<e.length;t++)o.push({name:e[t].name,link:e[t].link,like:e[t].likes.length});r([].concat(Object(u.a)(o),[o]))})),console.log("\u0421\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0441\u044f \u0431\u043b\u043e\u043a \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a")}),[]),c.a.createElement("div",{className:"root"},c.a.createElement("div",{className:"profile root__section"},c.a.createElement(N,{onEditProfile:function(){p(!0)},onAddPlace:function(){b(!0)},onEditAvatar:function(){O(!0)}})),c.a.createElement("div",{className:"places-list root__section"},o.map((function(e,t){var a=e.name,n=e.link,o=e.like;return c.a.createElement(h,{name:a,link:n,like:o})}))),g," && ",c.a.createElement(f,{name:"avatar",title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",button:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",handleClose:y,isOpen:g}),i," && ",c.a.createElement(f,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",handleClose:y,isOpen:i}),E," && ",c.a.createElement(f,{name:"new",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"+",handleClose:y,isOpen:E}))};var g=function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("p",{className:"footer_title"},"Mesto 2021"))};var O=function(){return c.a.createElement("div",null,c.a.createElement(i,null),c.a.createElement(j,null),c.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},2:function(e,t,a){},7:function(e,t,a){e.exports=a.p+"static/media/logo.aa3e7ad2.svg"},8:function(e,t,a){e.exports=a.p+"static/media/close.41450a58.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.d5a7a3a9.chunk.js.map